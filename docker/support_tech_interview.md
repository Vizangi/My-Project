### **1-2. 20 вопросов с ответами (простые и каверзные)**

---

#### **Простые вопросы**

1. **Что такое Docker?**
   - Ответ: Docker — это платформа для контейнеризации приложений, которая позволяет упаковывать приложения и их зависимости в изолированные контейнеры.

2. **Что такое контейнер?**
   - Ответ: Контейнер — это легковесная, изолированная среда, которая содержит приложение и все его зависимости для запуска.

3. **Какие основные команды Docker вы знаете?**
   - Ответ: `docker run`, `docker build`, `docker ps`, `docker images`, `docker logs`, `docker exec`.

4. **Что такое Dockerfile?**
   - Ответ: Dockerfile — это текстовый файл, содержащий инструкции для создания Docker-образа.

5. **Как создать Docker-образ?**
   - Ответ: Используя команду `docker build -t <имя_образа> .` в директории с Dockerfile.

6. **Что такое Docker Compose?**
   - Ответ: Docker Compose — это инструмент для управления многоконтейнерными приложениями через YAML-файл.

7. **Как запустить контейнер?**
   - Ответ: `docker run <имя_образа>`.

8. **Что такое Docker Hub?**
   - Ответ: Docker Hub — это облачный реестр образов Docker, где можно хранить и делиться образами.

9. **Как остановить контейнер?**
   - Ответ: `docker stop <id_контейнера>`.

10. **Что такое volumes в Docker?**
    - Ответ: Volumes — это механизм для сохранения данных вне контейнера, чтобы данные не терялись при перезапуске контейнера.

---

#### **Каверзные вопросы**

11. **Чем отличается виртуализация от контейнеризации?**
    - Ответ: Виртуализация эмулирует полную операционную систему с гипервизором (например, VMware, VirtualBox), а контейнеризация использует ядро хостовой системы и предоставляет изоляцию только на уровне процессов и файловой системы.

12. **Можно ли запустить Windows в контейнере?**
    - Ответ: Нет, так как контейнеры используют ядро хостовой ОС. Однако можно запустить Linux-приложения в Windows-контейнерах через WSL2.

13. **Есть ли контейнеры на основе Windows?**
    - Ответ: Да, Docker поддерживает контейнеры на базе Windows, но они требуют Windows Server или Windows 10/11 Pro с включенной поддержкой контейнеров.

14. **Как сделать мониторинг внешних серверов из контейнера?**
    - Ответ: Использовать инструменты мониторинга (например, Prometheus, Grafana) внутри контейнера, который будет собирать метрики через сети (например, HTTP, SNMP).

15. **Как сохранять данные в контейнерах?**
    - Ответ: Использовать volumes (`docker volume create`) или bind mounts (`docker run -v /host/path:/container/path`).

16. **Что такое UID и GID в Docker?**
    - Ответ: UID (User ID) и GID (Group ID) — это идентификаторы пользователя и группы внутри контейнера, которые влияют на права доступа к файлам.

17. **Как смотреть логи контейнера?**
    - Ответ: `docker logs <id_контейнера>`.

18. **Как делать дебаг контейнера?**
    - Ответ: Использовать `docker exec -it <id_контейнера> bash` для входа в контейнер, проверки логов, переменных окружения и состояния процессов.

19. **Как правильно писать Dockerfile?**
    Выучить, что означает каждый параметр построчно.
    - Ответ: 
      ```Dockerfile
      FROM python:3.9
      WORKDIR /app
      COPY requirements.txt .
      RUN pip install -r requirements.txt
      COPY . .
      CMD ["python", "app.py"]
      ```

20. **Как правильно писать docker-compose.yml?**
    - Ответ:
      ```yaml
      version: '3.8'
      services:
        web:
          image: nginx:latest
          ports:
            - "80:80"
        app:
          build: .
          volumes:
            - .:/app
      ```

---

### **3. Чем отличается виртуализация от контейнеризации? Можно ли запустить Windows в контейнере? Есть ли контейнеры на основе Windows?**

- **Виртуализация vs Контейнеризация**:
  - Виртуализация: Эмулируется полная ОС с помощью гипервизора (например, VMware, VirtualBox). Каждая виртуальная машина имеет свое ядро.
  - Контейнеризация: Используется ядро хостовой ОС, контейнеры изолируют процессы и файловые системы, но не имеют собственного ядра.

- **Можно ли запустить Windows в контейнере?**
  - Нет, так как контейнеры используют ядро хостовой ОС. Однако можно запускать Windows-приложения в Windows-контейнерах на Windows Server или Windows 10/11 Pro.

- **Есть ли контейнеры на основе Windows?**
  - Да, Docker поддерживает Windows-контейнеры, но они работают только на Windows-хостах.

---

### **4. Как сделать мониторинг внешних серверов из контейнера? Как сохранять данные в контейнерах? Что такое UID и GID в Docker?**

- **Мониторинг внешних серверов из контейнера**:
  - Использовать инструменты мониторинга (Prometheus, Grafana) внутри контейнера.
  - Настроить сбор метрик через сети (HTTP, SNMP).
  - Пример: Prometheus может скрейпить метрики с внешних серверов через конфигурацию `scrape_configs`.

- **Сохранение данных в контейнерах**:
  - Использовать volumes: `docker volume create my_volume`.
  - Использовать bind mounts: `docker run -v /host/path:/container/path`.

- **UID и GID в Docker**:
  - UID (User ID) и GID (Group ID) определяют права доступа к файлам внутри контейнера.
  - Если UID/GID контейнера не совпадают с хостовой системой, могут возникнуть проблемы с правами доступа.

---

### **5. Как смотреть логи?**

- **Команда**: `docker logs <id_контейнера>`.
- **Дополнительно**:
  - `docker logs -f <id_контейнера>` — следить за логами в реальном времени.
  - Логи также можно найти в `/var/lib/docker/containers/<id_контейнера>/`.

---

### **6. Как делать дебаг?**

- **Шаги**:
  1. Зайти в контейнер: `docker exec -it <id_контейнера> bash`.
  2. Проверить логи: `docker logs <id_контейнера>`.
  3. Проверить переменные окружения: `printenv`.
  4. Проверить процессы: `ps aux`.
  5. Использовать инструменты дебага (например, `strace`, `tcpdump`).

---

### **7. Как писать Dockerfile и docker-compose.yml?**

- **Dockerfile**:
  ```Dockerfile
  FROM python:3.9
  WORKDIR /app
  COPY requirements.txt .
  RUN pip install -r requirements.txt
  COPY . .
  CMD ["python", "app.py"]
  ```

- **docker-compose.yml**:
  ```yaml
  version: '3.8'
  services:
    web:
      image: nginx:latest
      ports:
        - "80:80"
    app:
      build: .
      volumes:
        - .:/app
  ```

---

### **8. Как разворачивать Docker Compose в компании?**

- **Последовательность**:
  1. Подготовить `docker-compose.yml` и Dockerfile.
  2. Развернуть на серверах (например, на продакшен-серверах или CI/CD-агенте).
  3. Использовать команду: `docker-compose up -d`.
  4. Автоматизировать через CI/CD (например, TeamCity, Jenkins):
     - Добавить шаг сборки: `docker-compose build`.
     - Добавить шаг деплоя: `docker-compose up -d`.

- **Пример команд**:
  ```bash
  ssh user@server "cd /path/to/project && git pull && docker-compose down && docker-compose up -d"
  ```

- **Инструменты**:
  - TeamCity/Jenkins для автоматизации.
  - Ansible/Terraform для управления серверами.

---

### **Ответы на вопросы по порядку**
1. **Чем отличается виртуализация от контейнеризации?**  
   Виртуализация эмулирует полную ОС, а контейнеризация использует ядро хостовой ОС.

2. **Можно ли запустить Windows в контейнере?**  
   Нет, но можно запускать Windows-приложения в Windows-контейнерах.

3. **Есть ли контейнеры на основе Windows?**  
   Да, поддерживаются на Windows Server и Windows 10/11 Pro.

4. **Как сделать мониторинг внешних серверов из контейнера?**  
   Использовать инструменты мониторинга (Prometheus, Grafana).

5. **Как сохранять данные в контейнерах?**  
   Использовать volumes или bind mounts.

6. **Что такое UID и GID в Docker?**  
   Идентификаторы пользователя и группы для управления правами доступа.

7. **Как смотреть логи?**  
   `docker logs <id_контейнера>`.

8. **Как делать дебаг?**  
   Использовать `docker exec`, проверять логи, переменные окружения и процессы.

9. **Как писать Dockerfile и docker-compose.yml?**  
   См. примеры выше.

10. **Как разворачивать Docker Compose в компании?**  
    Через CI/CD (TeamCity, Jenkins) или SSH-команды.

---

### **Итоговый ответ**
**Вопросы и ответы охватывают основы Docker, сложные темы (мониторинг, дебаг, UID/GID) и практические аспекты (развертывание через CI/CD).**
